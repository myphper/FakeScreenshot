var papi;var appfun_pay,appfun_jump_login,appfun_copy_text,appfun_share_wx_image;window.apiready=function(){papi=api;appfun_pay=function(type){api.actionSheet({title:'选择付款方式',cancelTitle:'取消',destructiveTitle:'支付宝付款(立减2元)',buttons:['微信付款']},function(ret,err){var pay_channel;switch(ret.buttonIndex){case 1:pay_channel='alipay';break;case 2:pay_channel='wx';break;case 3:return;break;}
api.execScript({name:'root',script:"hook_payfun("+ type+",'"+ pay_channel+"');"});api.confirm({title:'提示',msg:'支付成功了吗？',buttons:['成功了','没有']},function(ret,err){if(ret.buttonIndex==1){appfun_jump_login();}});});};appfun_jump_login=function(){api.execScript({name:'root',script:"hook_jump_login();"});api.closeToWin({name:'root'});};appfun_copy_text=function(text,successMsg){var clipBoard=api.require('clipBoard');clipBoard.set({value:text},function(ret,err){if(ret.status){if(successMsg==null||successMsg==""){successMsg="复制成功"}
alert(successMsg);}else{alert(err.msg);}});};appfun_share_wx_image=function(type,thumb,contentUrl){var wx=api.require('wx');wx.shareImage({scene:type,contentUrl:contentUrl},function(ret,err){if(ret.status){alert('分享成功');}else{switch(err.code){case 6:alert("您手机未安装微信(若多开版,则也不能正常打开微信),您可以直接将图片保存到相册。");break;default:alert("分享失败,您可以在底部直接点击[保存相册]后到微信中分享。");break;}}});}
if(typeof appready=="function"){appready();}}